<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Citas Técnicas - TecMerch</title>
  <link rel="stylesheet" href="../../../style/private/citas/citas_listado.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f4f6f8; margin: 0; }
    .contenedor { display: flex; height: 100vh; }
    .sidebar {
      width: 230px; background: #2c3e50; color: white; display: flex; flex-direction: column; padding: 20px;
    }
    .logo { font-size: 1.4rem; font-weight: bold; display: flex; align-items: center; gap: 10px; margin-bottom: 30px; }
    .sidebar nav a {
      color: #ecf0f1; text-decoration: none; display: block; padding: 12px 10px; border-radius: 8px;
      margin-bottom: 8px; font-size: 0.95rem; transition: 0.2s;
    }
    .sidebar nav a:hover, .sidebar nav a.activo { background: #3498db; color: white; }
    .contenido { flex: 1; padding: 40px; background: #ecf0f1; overflow-y: auto; }
    h1 { color: #2c3e50; display: flex; align-items: center; gap: 10px; }
    table { width: 100%; border-collapse: collapse; background: white; margin-top: 20px; border-radius: 8px; overflow: hidden; }
    th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
    th { background: #3498db; color: white; }
    tr:hover { background: #f1f1f1; }
    .acciones button {
      border: none; padding: 6px 10px; border-radius: 5px; cursor: pointer; font-size: 0.9rem; margin-right: 5px;
    }
    .editar { background: #f39c12; color: white; }
    .eliminar { background: #e74c3c; color: white; }
    .btn-agregar {
      background: #3498db; color: white; text-decoration: none; padding: 10px 15px;
      border-radius: 8px; display: inline-flex; align-items: center; gap: 8px;
    }
  </style>
</head>

<body>
  <div class="contenedor">
    <aside class="sidebar">
      <div class="logo"><i class="bi bi-laptop"></i><span>TecMerch</span></div>
      <nav>
        <a href="../ventas/ventas.html"><i class="bi bi-cart"></i> Ventas</a>
        <a href="../productos/productos.html"><i class="bi bi-box-seam"></i> Productos</a>
        <a href="../clientes/clientes.html"><i class="bi bi-people"></i> Clientes</a>
        <a href="../categorias/categorias.html"><i class="bi bi-tags"></i> Categorías</a>
        <a href="../reportes.html"><i class="bi bi-file-earmark-bar-graph"></i> Reportes</a>
        <a href="citas_tecnicas.html" class="activo"><i class="bi bi-tools"></i> Citas Técnicas</a>
      </nav>
    </aside>

    <main class="contenido">
      <h1><i class="bi bi-tools"></i> Citas Técnicas</h1>
      <a href="citas_tecnicas-agregar.html" class="btn-agregar"><i class="bi bi-plus-circle"></i> Nueva Cita</a>

      <table id="tablaCitas">
        <thead>
          <tr>
            <th>ID</th>
            <th>Cliente</th>
            <th>Fecha</th>
            <th>Servicio</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </main>
  </div>

  <script>
    const citas = JSON.parse(localStorage.getItem("citasTecnicas")) || [];
    const tbody = document.querySelector("#tablaCitas tbody");

    function cargarTabla() {
      tbody.innerHTML = "";
      citas.forEach(c => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${c.id}</td>
          <td>${c.clienteNombre}</td>
          <td>${c.fecha}</td>
          <td>${c.servicio}</td>
          <td class="acciones">
            <button class="editar" onclick="editarCita('${c.id}')"><i class="bi bi-pencil"></i></button>
            <button class="eliminar" onclick="eliminarCita('${c.id}')"><i class="bi bi-trash"></i></button>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    function editarCita(id) {
      window.location.href = `citas_tecnicas-editar.html?id=${id}`;
    }

    function eliminarCita(id) {
      if (confirm("¿Seguro que deseas eliminar esta cita?")) {
        const index = citas.findIndex(c => c.id === id);
        if (index !== -1) {
          citas.splice(index, 1);
          localStorage.setItem("citasTecnicas", JSON.stringify(citas));
          cargarTabla();
        }
      }
    }

    cargarTabla();
  </script>
</body>
</html>
